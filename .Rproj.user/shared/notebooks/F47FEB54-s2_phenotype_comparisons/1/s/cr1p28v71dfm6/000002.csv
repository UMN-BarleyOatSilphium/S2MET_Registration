"0","```r
# Subset
s2_tidy_local <- s2.tidy %>%
  filter(location %in% c(\"STP\", \"CRM\", \"FND\", \"BCW\"),
         !str_detect(trial, \"FHB\"))
s2_local_BLUEs <- s2_tidy_local %>%
  split(.$trait) %>%
  map(function(tr) {
    
    # If the number of environments is one...
    if (length(unique(tr$environment)) == 1) {
      fit <- lm(value ~ -1 + line_name, data = tr)
      BLUEs <- coef(fit)
      
    } else {
      fit <- lmer(value ~ -1 + line_name + (1|environment) + (1|line_name:environment), data = tr)
      BLUEs <- fixef(fit)
      
    }
    
    # Return a data.frame with BLUEs
    data.frame(
      line_name = str_replace(names(BLUEs), \"line_name\", \"\"), 
      trait = unique(tr$trait),
      value = BLUEs,
      row.names = NULL
    )
    
  })
s2_local_BLUEs1 <- s2_local_BLUEs %>%
  bind_rows()
```"
"1","Unequal factor levels: coercing to characterUnequal factor levels: coercing to character
"
"0","```r
    
```"
